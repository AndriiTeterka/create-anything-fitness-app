{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":73,"index":120}}],"key":"vvb+tbs8cGp9hlTxgL5PZCjRz5E=","exportNames":["*"],"imports":1}},{"name":"./NavigationStateContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":121},"end":{"line":5,"column":69,"index":190}}],"key":"vPXNy6i2DuFIp7nHtHgSOvNmS+U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      n[k] = e[k];\n    });\n    n.default = e;\n    return n;\n  }\n  exports.useOptionsGetters = useOptionsGetters;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _NavigationBuilderContextJs = require(_dependencyMap[1], \"./NavigationBuilderContext.js\");\n  var _NavigationStateContextJs = require(_dependencyMap[2], \"./NavigationStateContext.js\");\n  function useOptionsGetters({\n    key,\n    options,\n    navigation\n  }) {\n    const optionsRef = React.useRef(options);\n    const optionsGettersFromChildRef = React.useRef({});\n    const {\n      onOptionsChange\n    } = React.useContext(_NavigationBuilderContextJs.NavigationBuilderContext);\n    const {\n      addOptionsGetter: parentAddOptionsGetter\n    } = React.useContext(_NavigationStateContextJs.NavigationStateContext);\n    const optionsChangeListener = React.useCallback(() => {\n      const isFocused = navigation?.isFocused() ?? true;\n      const hasChildren = Object.keys(optionsGettersFromChildRef.current).length;\n      if (isFocused && !hasChildren) {\n        onOptionsChange(optionsRef.current ?? {});\n      }\n    }, [navigation, onOptionsChange]);\n    React.useEffect(() => {\n      optionsRef.current = options;\n      optionsChangeListener();\n      return navigation?.addListener('focus', optionsChangeListener);\n    }, [navigation, options, optionsChangeListener]);\n    const getOptionsFromListener = React.useCallback(() => {\n      for (const key in optionsGettersFromChildRef.current) {\n        if (key in optionsGettersFromChildRef.current) {\n          const result = optionsGettersFromChildRef.current[key]?.();\n\n          // null means unfocused route\n          if (result !== null) {\n            return result;\n          }\n        }\n      }\n      return null;\n    }, []);\n    const getCurrentOptions = React.useCallback(() => {\n      const isFocused = navigation?.isFocused() ?? true;\n      if (!isFocused) {\n        return null;\n      }\n      const optionsFromListener = getOptionsFromListener();\n      if (optionsFromListener !== null) {\n        return optionsFromListener;\n      }\n      return optionsRef.current;\n    }, [navigation, getOptionsFromListener]);\n    React.useEffect(() => {\n      return parentAddOptionsGetter?.(key, getCurrentOptions);\n    }, [getCurrentOptions, parentAddOptionsGetter, key]);\n    const addOptionsGetter = React.useCallback((key, getter) => {\n      optionsGettersFromChildRef.current[key] = getter;\n      optionsChangeListener();\n      return () => {\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete optionsGettersFromChildRef.current[key];\n        optionsChangeListener();\n      };\n    }, [optionsChangeListener]);\n    return {\n      addOptionsGetter,\n      getCurrentOptions\n    };\n  }\n});","lineCount":87,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopNamespace"],[7,29,1,13,"e"],[7,30,1,13],[8,4,1,13],[8,8,1,13,"e"],[8,9,1,13],[8,13,1,13,"e"],[8,14,1,13],[8,15,1,13,"__esModule"],[8,25,1,13],[8,34,1,13,"e"],[8,35,1,13],[9,4,1,13],[9,8,1,13,"n"],[9,9,1,13],[10,4,1,13],[10,8,1,13,"e"],[10,9,1,13],[10,11,1,13,"Object"],[10,17,1,13],[10,18,1,13,"keys"],[10,22,1,13],[10,23,1,13,"e"],[10,24,1,13],[10,26,1,13,"forEach"],[10,33,1,13],[10,44,1,13,"k"],[10,45,1,13],[11,6,1,13,"n"],[11,7,1,13],[11,8,1,13,"k"],[11,9,1,13],[11,13,1,13,"e"],[11,14,1,13],[11,15,1,13,"k"],[11,16,1,13],[12,4,1,13],[13,4,1,13,"n"],[13,5,1,13],[13,6,1,13,"default"],[13,13,1,13],[13,16,1,13,"e"],[13,17,1,13],[14,4,1,13],[14,11,1,13,"n"],[14,12,1,13],[15,2,1,13],[16,2,6,0,"exports"],[16,9,6,0],[16,10,6,0,"useOptionsGetters"],[16,27,6,0],[16,30,6,0,"useOptionsGetters"],[16,47,6,0],[17,2,3,0],[17,6,3,0,"_react"],[17,12,3,0],[17,15,3,0,"require"],[17,22,3,0],[17,23,3,0,"_dependencyMap"],[17,37,3,0],[18,2,3,0],[18,6,3,0,"React"],[18,11,3,0],[18,14,3,0,"_interopNamespace"],[18,31,3,0],[18,32,3,0,"_react"],[18,38,3,0],[19,2,4,0],[19,6,4,0,"_NavigationBuilderContextJs"],[19,33,4,0],[19,36,4,0,"require"],[19,43,4,0],[19,44,4,0,"_dependencyMap"],[19,58,4,0],[20,2,5,0],[20,6,5,0,"_NavigationStateContextJs"],[20,31,5,0],[20,34,5,0,"require"],[20,41,5,0],[20,42,5,0,"_dependencyMap"],[20,56,5,0],[21,2,6,7],[21,11,6,16,"useOptionsGetters"],[21,28,6,33,"useOptionsGetters"],[21,29,6,34],[22,4,7,2,"key"],[22,7,7,5],[23,4,8,2,"options"],[23,11,8,9],[24,4,9,2,"navigation"],[25,2,10,0],[25,3,10,1],[25,5,10,3],[26,4,11,2],[26,10,11,8,"optionsRef"],[26,20,11,18],[26,23,11,21,"React"],[26,28,11,26],[26,29,11,27,"useRef"],[26,35,11,33],[26,36,11,34,"options"],[26,43,11,41],[26,44,11,42],[27,4,12,2],[27,10,12,8,"optionsGettersFromChildRef"],[27,36,12,34],[27,39,12,37,"React"],[27,44,12,42],[27,45,12,43,"useRef"],[27,51,12,49],[27,52,12,50],[27,53,12,51],[27,54,12,52],[27,55,12,53],[28,4,13,2],[28,10,13,8],[29,6,14,4,"onOptionsChange"],[30,4,15,2],[30,5,15,3],[30,8,15,6,"React"],[30,13,15,11],[30,14,15,12,"useContext"],[30,24,15,22],[30,25,15,23,"NavigationBuilderContext"],[30,52,15,47],[30,53,15,47,"NavigationBuilderContext"],[30,77,15,47],[30,78,15,48],[31,4,16,2],[31,10,16,8],[32,6,17,4,"addOptionsGetter"],[32,22,17,20],[32,24,17,22,"parentAddOptionsGetter"],[33,4,18,2],[33,5,18,3],[33,8,18,6,"React"],[33,13,18,11],[33,14,18,12,"useContext"],[33,24,18,22],[33,25,18,23,"NavigationStateContext"],[33,50,18,45],[33,51,18,45,"NavigationStateContext"],[33,73,18,45],[33,74,18,46],[34,4,19,2],[34,10,19,8,"optionsChangeListener"],[34,31,19,29],[34,34,19,32,"React"],[34,39,19,37],[34,40,19,38,"useCallback"],[34,51,19,49],[34,52,19,50],[34,58,19,56],[35,6,20,4],[35,12,20,10,"isFocused"],[35,21,20,19],[35,24,20,22,"navigation"],[35,34,20,32],[35,36,20,34,"isFocused"],[35,45,20,43],[35,46,20,44],[35,47,20,45],[35,51,20,49],[35,55,20,53],[36,6,21,4],[36,12,21,10,"hasChildren"],[36,23,21,21],[36,26,21,24,"Object"],[36,32,21,30],[36,33,21,31,"keys"],[36,37,21,35],[36,38,21,36,"optionsGettersFromChildRef"],[36,64,21,62],[36,65,21,63,"current"],[36,72,21,70],[36,73,21,71],[36,74,21,72,"length"],[36,80,21,78],[37,6,22,4],[37,10,22,8,"isFocused"],[37,19,22,17],[37,23,22,21],[37,24,22,22,"hasChildren"],[37,35,22,33],[37,37,22,35],[38,8,23,6,"onOptionsChange"],[38,23,23,21],[38,24,23,22,"optionsRef"],[38,34,23,32],[38,35,23,33,"current"],[38,42,23,40],[38,46,23,44],[38,47,23,45],[38,48,23,46],[38,49,23,47],[39,6,24,4],[40,4,25,2],[40,5,25,3],[40,7,25,5],[40,8,25,6,"navigation"],[40,18,25,16],[40,20,25,18,"onOptionsChange"],[40,35,25,33],[40,36,25,34],[40,37,25,35],[41,4,26,2,"React"],[41,9,26,7],[41,10,26,8,"useEffect"],[41,19,26,17],[41,20,26,18],[41,26,26,24],[42,6,27,4,"optionsRef"],[42,16,27,14],[42,17,27,15,"current"],[42,24,27,22],[42,27,27,25,"options"],[42,34,27,32],[43,6,28,4,"optionsChangeListener"],[43,27,28,25],[43,28,28,26],[43,29,28,27],[44,6,29,4],[44,13,29,11,"navigation"],[44,23,29,21],[44,25,29,23,"addListener"],[44,36,29,34],[44,37,29,35],[44,44,29,42],[44,46,29,44,"optionsChangeListener"],[44,67,29,65],[44,68,29,66],[45,4,30,2],[45,5,30,3],[45,7,30,5],[45,8,30,6,"navigation"],[45,18,30,16],[45,20,30,18,"options"],[45,27,30,25],[45,29,30,27,"optionsChangeListener"],[45,50,30,48],[45,51,30,49],[45,52,30,50],[46,4,31,2],[46,10,31,8,"getOptionsFromListener"],[46,32,31,30],[46,35,31,33,"React"],[46,40,31,38],[46,41,31,39,"useCallback"],[46,52,31,50],[46,53,31,51],[46,59,31,57],[47,6,32,4],[47,11,32,9],[47,17,32,15,"key"],[47,20,32,18],[47,24,32,22,"optionsGettersFromChildRef"],[47,50,32,48],[47,51,32,49,"current"],[47,58,32,56],[47,60,32,58],[48,8,33,6],[48,12,33,10,"key"],[48,15,33,13],[48,19,33,17,"optionsGettersFromChildRef"],[48,45,33,43],[48,46,33,44,"current"],[48,53,33,51],[48,55,33,53],[49,10,34,8],[49,16,34,14,"result"],[49,22,34,20],[49,25,34,23,"optionsGettersFromChildRef"],[49,51,34,49],[49,52,34,50,"current"],[49,59,34,57],[49,60,34,58,"key"],[49,63,34,61],[49,64,34,62],[49,67,34,65],[49,68,34,66],[51,10,36,8],[52,10,37,8],[52,14,37,12,"result"],[52,20,37,18],[52,25,37,23],[52,29,37,27],[52,31,37,29],[53,12,38,10],[53,19,38,17,"result"],[53,25,38,23],[54,10,39,8],[55,8,40,6],[56,6,41,4],[57,6,42,4],[57,13,42,11],[57,17,42,15],[58,4,43,2],[58,5,43,3],[58,7,43,5],[58,9,43,7],[58,10,43,8],[59,4,44,2],[59,10,44,8,"getCurrentOptions"],[59,27,44,25],[59,30,44,28,"React"],[59,35,44,33],[59,36,44,34,"useCallback"],[59,47,44,45],[59,48,44,46],[59,54,44,52],[60,6,45,4],[60,12,45,10,"isFocused"],[60,21,45,19],[60,24,45,22,"navigation"],[60,34,45,32],[60,36,45,34,"isFocused"],[60,45,45,43],[60,46,45,44],[60,47,45,45],[60,51,45,49],[60,55,45,53],[61,6,46,4],[61,10,46,8],[61,11,46,9,"isFocused"],[61,20,46,18],[61,22,46,20],[62,8,47,6],[62,15,47,13],[62,19,47,17],[63,6,48,4],[64,6,49,4],[64,12,49,10,"optionsFromListener"],[64,31,49,29],[64,34,49,32,"getOptionsFromListener"],[64,56,49,54],[64,57,49,55],[64,58,49,56],[65,6,50,4],[65,10,50,8,"optionsFromListener"],[65,29,50,27],[65,34,50,32],[65,38,50,36],[65,40,50,38],[66,8,51,6],[66,15,51,13,"optionsFromListener"],[66,34,51,32],[67,6,52,4],[68,6,53,4],[68,13,53,11,"optionsRef"],[68,23,53,21],[68,24,53,22,"current"],[68,31,53,29],[69,4,54,2],[69,5,54,3],[69,7,54,5],[69,8,54,6,"navigation"],[69,18,54,16],[69,20,54,18,"getOptionsFromListener"],[69,42,54,40],[69,43,54,41],[69,44,54,42],[70,4,55,2,"React"],[70,9,55,7],[70,10,55,8,"useEffect"],[70,19,55,17],[70,20,55,18],[70,26,55,24],[71,6,56,4],[71,13,56,11,"parentAddOptionsGetter"],[71,35,56,33],[71,38,56,36,"key"],[71,41,56,39],[71,43,56,41,"getCurrentOptions"],[71,60,56,58],[71,61,56,59],[72,4,57,2],[72,5,57,3],[72,7,57,5],[72,8,57,6,"getCurrentOptions"],[72,25,57,23],[72,27,57,25,"parentAddOptionsGetter"],[72,49,57,47],[72,51,57,49,"key"],[72,54,57,52],[72,55,57,53],[72,56,57,54],[73,4,58,2],[73,10,58,8,"addOptionsGetter"],[73,26,58,24],[73,29,58,27,"React"],[73,34,58,32],[73,35,58,33,"useCallback"],[73,46,58,44],[73,47,58,45],[73,48,58,46,"key"],[73,51,58,49],[73,53,58,51,"getter"],[73,59,58,57],[73,64,58,62],[74,6,59,4,"optionsGettersFromChildRef"],[74,32,59,30],[74,33,59,31,"current"],[74,40,59,38],[74,41,59,39,"key"],[74,44,59,42],[74,45,59,43],[74,48,59,46,"getter"],[74,54,59,52],[75,6,60,4,"optionsChangeListener"],[75,27,60,25],[75,28,60,26],[75,29,60,27],[76,6,61,4],[76,13,61,11],[76,19,61,17],[77,8,62,6],[78,8,63,6],[78,15,63,13,"optionsGettersFromChildRef"],[78,41,63,39],[78,42,63,40,"current"],[78,49,63,47],[78,50,63,48,"key"],[78,53,63,51],[78,54,63,52],[79,8,64,6,"optionsChangeListener"],[79,29,64,27],[79,30,64,28],[79,31,64,29],[80,6,65,4],[80,7,65,5],[81,4,66,2],[81,5,66,3],[81,7,66,5],[81,8,66,6,"optionsChangeListener"],[81,29,66,27],[81,30,66,28],[81,31,66,29],[82,4,67,2],[82,11,67,9],[83,6,68,4,"addOptionsGetter"],[83,22,68,20],[84,6,69,4,"getCurrentOptions"],[85,4,70,2],[85,5,70,3],[86,2,71,0],[87,0,71,1],[87,3]],"functionMap":{"names":["<global>","useOptionsGetters","optionsChangeListener","React.useEffect$argument_0","getOptionsFromListener","getCurrentOptions","addOptionsGetter","<anonymous>"],"mappings":"AAA;OCK;kDCa;GDM;kBEC;GFI;mDGC;GHY;8CIC;GJU;kBEC;GFE;6CKC;WCG;KDI;GLC;CDK"},"hasCjsExports":false},"type":"js/module"}]}