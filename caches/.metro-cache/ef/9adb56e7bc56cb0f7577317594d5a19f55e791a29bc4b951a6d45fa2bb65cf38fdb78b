{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":31,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../context/PresenceContext.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":99},"end":{"line":4,"column":68,"index":167}}],"key":"770CUHTf+IRHceT11QtbGTttEvo=","exportNames":["*"],"imports":1}},{"name":"../../utils/use-constant.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":168},"end":{"line":5,"column":59,"index":227}}],"key":"fOYXwMLKWJV2ZT9WZTEjSFQflr8=","exportNames":["*"],"imports":1}},{"name":"../../utils/use-id.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":228},"end":{"line":6,"column":47,"index":275}}],"key":"JqSC2aATXgoDNYGbJkQwdjLE+2A=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      n[k] = e[k];\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"PresenceChild\", {\n    enumerable: true,\n    get: function () {\n      return PresenceChild;\n    }\n  });\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var React = _interopNamespace(_react);\n  var _contextPresenceContextMjs = require(_dependencyMap[2], \"../../context/PresenceContext.mjs\");\n  var _utilsUseConstantMjs = require(_dependencyMap[3], \"../../utils/use-constant.mjs\");\n  var _utilsUseIdMjs = require(_dependencyMap[4], \"../../utils/use-id.mjs\");\n  var PresenceChild = function (_a) {\n    var children = _a.children,\n      initial = _a.initial,\n      isPresent = _a.isPresent,\n      onExitComplete = _a.onExitComplete,\n      custom = _a.custom,\n      presenceAffectsLayout = _a.presenceAffectsLayout;\n    var presenceChildren = (0, _utilsUseConstantMjs.useConstant)(newChildrenMap);\n    var id = (0, _utilsUseIdMjs.useId)();\n    var context = (0, _react.useMemo)(function () {\n      return {\n        id: id,\n        initial: initial,\n        isPresent: isPresent,\n        custom: custom,\n        onExitComplete: function (childId) {\n          var e_1, _a;\n          presenceChildren.set(childId, true);\n          try {\n            for (var _b = (0, _tslib.__values)(presenceChildren.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n              var isComplete = _c.value;\n              if (!isComplete) return; // can stop searching when any is incomplete\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n          onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete();\n        },\n        register: function (childId) {\n          presenceChildren.set(childId, false);\n          return function () {\n            return presenceChildren.delete(childId);\n          };\n        }\n      };\n    },\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? undefined : [isPresent]);\n    (0, _react.useMemo)(function () {\n      presenceChildren.forEach(function (_, key) {\n        return presenceChildren.set(key, false);\n      });\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(function () {\n      !isPresent && !presenceChildren.size && (onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete());\n    }, [isPresent]);\n    return /*#__PURE__*/React.createElement(_contextPresenceContextMjs.PresenceContext.Provider, {\n      value: context\n    }, children);\n  };\n  function newChildrenMap() {\n    return new Map();\n  }\n});","lineCount":97,"map":[[16,2,63,0,"Object"],[16,8,63,0],[16,9,63,0,"defineProperty"],[16,23,63,0],[16,24,63,0,"exports"],[16,31,63,0],[17,4,63,0,"enumerable"],[17,14,63,0],[18,4,63,0,"get"],[18,7,63,0],[18,18,63,0,"get"],[18,19,63,0],[19,6,63,0],[19,13,63,9,"PresenceChild"],[19,26,63,22],[20,4,63,22],[21,2,63,22],[22,2,1,0],[22,6,1,0,"_tslib"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,2,0],[23,6,2,0,"_react"],[23,12,2,0],[23,15,2,0,"require"],[23,22,2,0],[23,23,2,0,"_dependencyMap"],[23,37,2,0],[24,2,2,0],[24,6,2,0,"React"],[24,11,2,0],[24,14,2,0,"_interopNamespace"],[24,31,2,0],[24,32,2,0,"_react"],[24,38,2,0],[25,2,4,0],[25,6,4,0,"_contextPresenceContextMjs"],[25,32,4,0],[25,35,4,0,"require"],[25,42,4,0],[25,43,4,0,"_dependencyMap"],[25,57,4,0],[26,2,5,0],[26,6,5,0,"_utilsUseConstantMjs"],[26,26,5,0],[26,29,5,0,"require"],[26,36,5,0],[26,37,5,0,"_dependencyMap"],[26,51,5,0],[27,2,6,0],[27,6,6,0,"_utilsUseIdMjs"],[27,20,6,0],[27,23,6,0,"require"],[27,30,6,0],[27,31,6,0,"_dependencyMap"],[27,45,6,0],[28,2,8,0],[28,6,8,4,"PresenceChild"],[28,19,8,17],[28,22,8,20],[28,31,8,20,"PresenceChild"],[28,32,8,30,"_a"],[28,34,8,32],[28,36,8,34],[29,4,9,4],[29,8,9,8,"children"],[29,16,9,16],[29,19,9,19,"_a"],[29,21,9,21],[29,22,9,22,"children"],[29,30,9,30],[30,6,9,32,"initial"],[30,13,9,39],[30,16,9,42,"_a"],[30,18,9,44],[30,19,9,45,"initial"],[30,26,9,52],[31,6,9,54,"isPresent"],[31,15,9,63],[31,18,9,66,"_a"],[31,20,9,68],[31,21,9,69,"isPresent"],[31,30,9,78],[32,6,9,80,"onExitComplete"],[32,20,9,94],[32,23,9,97,"_a"],[32,25,9,99],[32,26,9,100,"onExitComplete"],[32,40,9,114],[33,6,9,116,"custom"],[33,12,9,122],[33,15,9,125,"_a"],[33,17,9,127],[33,18,9,128,"custom"],[33,24,9,134],[34,6,9,136,"presenceAffectsLayout"],[34,27,9,157],[34,30,9,160,"_a"],[34,32,9,162],[34,33,9,163,"presenceAffectsLayout"],[34,54,9,184],[35,4,10,4],[35,8,10,8,"presenceChildren"],[35,24,10,24],[35,27,10,27],[35,31,10,27,"useConstant"],[35,51,10,38],[35,52,10,38,"useConstant"],[35,63,10,38],[35,65,10,39,"newChildrenMap"],[35,79,10,53],[35,80,10,54],[36,4,11,4],[36,8,11,8,"id"],[36,10,11,10],[36,13,11,13],[36,17,11,13,"useId"],[36,31,11,18],[36,32,11,18,"useId"],[36,37,11,18],[36,39,11,19],[36,40,11,20],[37,4,12,4],[37,8,12,8,"context"],[37,15,12,15],[37,18,12,18],[37,22,12,18,"useMemo"],[37,28,12,25],[37,29,12,25,"useMemo"],[37,36,12,25],[37,38,12,26],[37,50,12,38],[38,6,12,40],[38,13,12,48],[39,8,13,8,"id"],[39,10,13,10],[39,12,13,12,"id"],[39,14,13,14],[40,8,14,8,"initial"],[40,15,14,15],[40,17,14,17,"initial"],[40,24,14,24],[41,8,15,8,"isPresent"],[41,17,15,17],[41,19,15,19,"isPresent"],[41,28,15,28],[42,8,16,8,"custom"],[42,14,16,14],[42,16,16,16,"custom"],[42,22,16,22],[43,8,17,8,"onExitComplete"],[43,22,17,22],[43,24,17,24],[43,33,17,24,"onExitComplete"],[43,34,17,34,"childId"],[43,41,17,41],[43,43,17,43],[44,10,18,12],[44,14,18,16,"e_1"],[44,17,18,19],[44,19,18,21,"_a"],[44,21,18,23],[45,10,19,12,"presenceChildren"],[45,26,19,28],[45,27,19,29,"set"],[45,30,19,32],[45,31,19,33,"childId"],[45,38,19,40],[45,40,19,42],[45,44,19,46],[45,45,19,47],[46,10,20,12],[46,14,20,16],[47,12,21,16],[47,17,21,21],[47,21,21,25,"_b"],[47,23,21,27],[47,26,21,30],[47,30,21,30,"__values"],[47,36,21,38],[47,37,21,38,"__values"],[47,45,21,38],[47,47,21,39,"presenceChildren"],[47,63,21,55],[47,64,21,56,"values"],[47,70,21,62],[47,71,21,63],[47,72,21,64],[47,73,21,65],[47,75,21,67,"_c"],[47,77,21,69],[47,80,21,72,"_b"],[47,82,21,74],[47,83,21,75,"next"],[47,87,21,79],[47,88,21,80],[47,89,21,81],[47,91,21,83],[47,92,21,84,"_c"],[47,94,21,86],[47,95,21,87,"done"],[47,99,21,91],[47,101,21,93,"_c"],[47,103,21,95],[47,106,21,98,"_b"],[47,108,21,100],[47,109,21,101,"next"],[47,113,21,105],[47,114,21,106],[47,115,21,107],[47,117,21,109],[48,14,22,20],[48,18,22,24,"isComplete"],[48,28,22,34],[48,31,22,37,"_c"],[48,33,22,39],[48,34,22,40,"value"],[48,39,22,45],[49,14,23,20],[49,18,23,24],[49,19,23,25,"isComplete"],[49,29,23,35],[49,31,24,24],[49,38,24,31],[49,39,24,32],[50,12,25,16],[51,10,26,12],[51,11,26,13],[51,12,27,12],[51,19,27,19,"e_1_1"],[51,24,27,24],[51,26,27,26],[52,12,27,28,"e_1"],[52,15,27,31],[52,18,27,34],[53,14,27,36,"error"],[53,19,27,41],[53,21,27,43,"e_1_1"],[54,12,27,49],[54,13,27,50],[55,10,27,52],[55,11,27,53],[55,20,28,20],[56,12,29,16],[56,16,29,20],[57,14,30,20],[57,18,30,24,"_c"],[57,20,30,26],[57,24,30,30],[57,25,30,31,"_c"],[57,27,30,33],[57,28,30,34,"done"],[57,32,30,38],[57,37,30,43,"_a"],[57,39,30,45],[57,42,30,48,"_b"],[57,44,30,50],[57,45,30,51,"return"],[57,51,30,57],[57,52,30,58],[57,54,30,60,"_a"],[57,56,30,62],[57,57,30,63,"call"],[57,61,30,67],[57,62,30,68,"_b"],[57,64,30,70],[57,65,30,71],[58,12,31,16],[58,13,31,17],[58,22,32,24],[59,14,32,26],[59,18,32,30,"e_1"],[59,21,32,33],[59,23,32,35],[59,29,32,41,"e_1"],[59,32,32,44],[59,33,32,45,"error"],[59,38,32,50],[60,12,32,52],[61,10,33,12],[62,10,34,12,"onExitComplete"],[62,24,34,26],[62,29,34,31],[62,33,34,35],[62,37,34,39,"onExitComplete"],[62,51,34,53],[62,56,34,58],[62,61,34,63],[62,62,34,64],[62,65,34,67],[62,70,34,72],[62,71,34,73],[62,74,34,76,"onExitComplete"],[62,88,34,90],[62,89,34,91],[62,90,34,92],[63,8,35,8],[63,9,35,9],[64,8,36,8,"register"],[64,16,36,16],[64,18,36,18],[64,27,36,18,"register"],[64,28,36,28,"childId"],[64,35,36,35],[64,37,36,37],[65,10,37,12,"presenceChildren"],[65,26,37,28],[65,27,37,29,"set"],[65,30,37,32],[65,31,37,33,"childId"],[65,38,37,40],[65,40,37,42],[65,45,37,47],[65,46,37,48],[66,10,38,12],[66,17,38,19],[66,29,38,31],[67,12,38,33],[67,19,38,40,"presenceChildren"],[67,35,38,56],[67,36,38,57,"delete"],[67,42,38,63],[67,43,38,64,"childId"],[67,50,38,71],[67,51,38,72],[68,10,38,74],[68,11,38,75],[69,8,39,8],[70,6,40,4],[70,7,40,5],[71,4,40,8],[71,5,40,9],[72,4,41,4],[73,0,42,0],[74,0,43,0],[75,0,44,0],[76,0,45,0],[77,4,46,4,"presenceAffectsLayout"],[77,25,46,25],[77,28,46,28,"undefined"],[77,37,46,37],[77,40,46,40],[77,41,46,41,"isPresent"],[77,50,46,50],[77,51,46,51],[77,52,46,52],[78,4,47,4],[78,8,47,4,"useMemo"],[78,14,47,11],[78,15,47,11,"useMemo"],[78,22,47,11],[78,24,47,12],[78,36,47,24],[79,6,48,8,"presenceChildren"],[79,22,48,24],[79,23,48,25,"forEach"],[79,30,48,32],[79,31,48,33],[79,41,48,43,"_"],[79,42,48,44],[79,44,48,46,"key"],[79,47,48,49],[79,49,48,51],[80,8,48,53],[80,15,48,60,"presenceChildren"],[80,31,48,76],[80,32,48,77,"set"],[80,35,48,80],[80,36,48,81,"key"],[80,39,48,84],[80,41,48,86],[80,46,48,91],[80,47,48,92],[81,6,48,94],[81,7,48,95],[81,8,48,96],[82,4,49,4],[82,5,49,5],[82,7,49,7],[82,8,49,8,"isPresent"],[82,17,49,17],[82,18,49,18],[82,19,49,19],[83,4,50,4],[84,0,51,0],[85,0,52,0],[86,0,53,0],[87,4,54,4,"React"],[87,9,54,9],[87,10,54,10,"useEffect"],[87,19,54,19],[87,20,54,20],[87,32,54,32],[88,6,55,8],[88,7,55,9,"isPresent"],[88,16,55,18],[88,20,55,22],[88,21,55,23,"presenceChildren"],[88,37,55,39],[88,38,55,40,"size"],[88,42,55,44],[88,47,55,49,"onExitComplete"],[88,61,55,63],[88,66,55,68],[88,70,55,72],[88,74,55,76,"onExitComplete"],[88,88,55,90],[88,93,55,95],[88,98,55,100],[88,99,55,101],[88,102,55,104],[88,107,55,109],[88,108,55,110],[88,111,55,113,"onExitComplete"],[88,125,55,127],[88,126,55,128],[88,127,55,129],[88,128,55,130],[89,4,56,4],[89,5,56,5],[89,7,56,7],[89,8,56,8,"isPresent"],[89,17,56,17],[89,18,56,18],[89,19,56,19],[90,4,57,4],[90,24,57,12,"React"],[90,29,57,17],[90,30,57,18,"createElement"],[90,43,57,31],[90,44,57,32,"PresenceContext"],[90,70,57,47],[90,71,57,47,"PresenceContext"],[90,86,57,47],[90,87,57,48,"Provider"],[90,95,57,56],[90,97,57,58],[91,6,57,60,"value"],[91,11,57,65],[91,13,57,67,"context"],[92,4,57,75],[92,5,57,76],[92,7,57,78,"children"],[92,15,57,86],[92,16,57,87],[93,2,58,0],[93,3,58,1],[94,2,59,0],[94,11,59,9,"newChildrenMap"],[94,25,59,23,"newChildrenMap"],[94,26,59,23],[94,28,59,26],[95,4,60,4],[95,11,60,11],[95,15,60,15,"Map"],[95,18,60,18],[95,19,60,19],[95,20,60,20],[96,2,61,0],[97,0,61,1],[97,3]],"functionMap":{"names":["<global>","PresenceChild","useMemo$argument_0","onExitComplete","register","<anonymous>","presenceChildren.forEach$argument_0","React.useEffect$argument_0","newChildrenMap"],"mappings":"AAA;oBCO;0BCI;wBCK;SDkB;kBEC;mBCE,wDD;SFC;SDC;YCO;iCIC,8DJ;KDC;oBMK;KNE;CDE;AQC;CRE"},"hasCjsExports":false},"type":"js/module"}]}